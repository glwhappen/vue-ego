<template>
  <div class="home">
    <p class="message">
      折线图显示两条线的差值
    </p>
    <div class="buttons">
      <el-button @click="stopInterval" size="small">暂停</el-button>
    </div>
    <div id="chart1" style="height: 400px;"></div>
  </div>
</template>

<script>
export default {
  name: 'EchartsTest',
  data: function() {
    return {
      mychart: {}, // 图表
      proLine: null, // 上一条线标记
      interval: null // 刷新图谱的循环定时器
    }
  },
  mounted() {
    console.log('挂载成功')
    const myCharts = this.$echarts.init(document.getElementById('chart1')) // 传入dom元素和主题 主题默认是light还可以是dark
    const xDataArr = [
      '2022-02-15 22:53:36.561',
      '2022-02-16 00:13:32.173',
      '2022-02-16 01:33:33.957',
      '2022-02-16 02:53:29.664',
      '2022-02-16 04:13:27.211',
      '2022-02-16 05:33:31.689',
      '2022-02-16 06:53:33.688',
      '2022-02-16 08:13:34.118',
      '2022-02-16 09:33:34.155',
      '2022-02-16 10:53:36.736',
      '2022-02-16 12:13:32.448',
      '2022-02-16 13:33:32.475',
      '2022-02-16 14:53:30.015',
      '2022-02-16 16:13:31.593',
      '2022-02-16 17:07:02.636',
      '2022-02-16 17:07:03.840',
      '2022-02-16 17:07:12.331',
      '2022-02-16 17:07:19.555',
      '2022-02-16 17:07:25.590',
      '2022-02-16 17:07:31.568',
      '2022-02-16 17:07:38.830',
      '2022-02-16 17:07:44.902',
      '2022-02-16 17:07:52.231',
      '2022-02-16 17:07:59.434',
      '2022-02-16 17:08:15.089',
      '2022-02-16 17:08:21.115',
      '2022-02-16 17:08:28.346',
      '2022-02-16 17:08:35.558',
      '2022-02-16 17:08:42.909',
      '2022-02-16 17:09:11.799',
      '2022-02-16 17:09:18.975',
      '2022-02-16 17:09:26.119',
      '2022-02-16 17:09:32.061',
      '2022-02-16 17:09:40.561',
      '2022-02-16 17:09:47.771',
      '2022-02-16 17:09:53.773',
      '2022-02-16 17:09:59.783',
      '2022-02-16 17:10:08.201',
      '2022-02-16 17:10:15.425',
      '2022-02-16 17:10:22.609',
      '2022-02-16 17:10:31.045',
      '2022-02-16 17:10:37.038',
      '2022-02-16 17:10:45.504',
      '2022-02-16 17:10:51.514',
      '2022-02-16 17:10:58.691',
      '2022-02-16 17:11:06.048',
      '2022-02-16 17:11:13.290',
      '2022-02-16 17:11:20.533',
      '2022-02-16 17:11:27.844',
      '2022-02-16 17:11:33.988',
      '2022-02-16 17:11:40.067',
      '2022-02-16 17:11:46.190',
      '2022-02-16 17:11:53.483',
      '2022-02-17 21:23:57.948',
      '2022-02-17 21:23:59.160',
      '2022-02-17 21:24:00.361',
      '2022-02-17 21:24:10.091',
      '2022-02-17 21:24:16.197',
      '2022-02-17 21:24:22.179',
      '2022-02-17 21:24:29.416',
      '2022-02-17 21:24:35.373',
      '2022-02-17 21:24:41.345',
      '2022-02-17 21:24:49.008',
      '2022-02-17 21:24:55.524',
      '2022-02-17 21:25:03.142',
      '2022-02-17 21:25:09.190',
      '2022-02-17 21:25:15.171',
      '2022-02-17 21:25:22.401',
      '2022-02-17 21:25:28.371',
      '2022-02-17 21:25:34.412',
      '2022-02-17 21:25:41.575',
      '2022-02-17 21:25:47.527',
      '2022-02-17 21:25:54.651',
      '2022-02-17 21:26:00.754',
      '2022-02-17 21:26:08.016',
      '2022-02-17 21:26:15.188',
      '2022-02-17 21:26:21.134',
      '2022-02-17 21:26:28.264',
      '2022-02-17 21:26:34.235',
      '2022-02-17 21:26:40.188',
      '2022-02-17 21:26:48.594',
      '2022-02-17 21:26:54.566',
      '2022-02-17 21:27:01.781',
      '2022-02-17 21:27:09.000',
      '2022-02-17 21:27:16.156',
      '2022-02-17 21:27:24.531',
      '2022-02-17 21:27:30.478',
      '2022-02-17 21:27:37.654',
      '2022-02-17 21:27:46.031',
      '2022-02-17 21:27:51.966',
      '2022-02-17 21:27:59.156',
      '2022-02-17 21:28:06.298',
      '2022-02-17 21:28:13.452',
      '2022-02-17 22:43:55.265',
      '2022-02-18 00:03:53.500',
      '2022-02-18 01:23:53.800',
      '2022-02-18 02:43:50.544',
      '2022-02-18 04:03:50.187',
      '2022-02-18 05:23:52.081',
      '2022-02-18 06:43:53.235',
      '2022-02-18 08:03:56.140',
      '2022-02-18 09:24:00.450',
      '2022-02-18 10:44:02.401',
      '2022-02-18 11:12:53.573',
      '2022-02-18 11:12:54.803',
      '2022-02-18 11:13:03.354',
      '2022-02-18 11:13:09.411',
      '2022-02-18 11:13:15.427',
      '2022-02-18 11:13:23.864',
      '2022-02-18 11:13:31.076',
      '2022-02-18 11:13:37.032',
      '2022-02-18 11:13:44.246',
      '2022-02-18 11:13:51.535',
      '2022-02-18 11:13:57.553',
      '2022-02-18 11:14:03.630',
      '2022-02-18 11:14:10.919',
      '2022-02-18 11:14:16.994',
      '2022-02-18 11:14:24.180',
      '2022-02-18 11:14:30.188',
      '2022-02-18 11:14:36.241',
      '2022-02-18 11:14:42.273',
      '2022-02-18 11:14:49.588',
      '2022-02-18 11:14:55.601',
      '2022-02-18 11:15:02.855',
      '2022-02-18 11:15:10.159',
      '2022-02-18 11:15:17.416',
      '2022-02-18 11:15:23.436',
      '2022-02-18 11:15:30.678',
      '2022-02-18 11:15:36.669',
      '2022-02-18 11:15:43.846',
      '2022-02-18 11:15:49.877',
      '2022-02-18 11:15:57.082',
      '2022-02-18 11:16:03.139',
      '2022-02-18 11:16:10.386',
      '2022-02-18 11:16:16.462',
      '2022-02-18 11:16:23.676',
      '2022-02-18 11:16:29.672',
      '2022-02-18 11:17:20.318',
      '2022-02-18 11:17:21.504',
      '2022-02-18 11:17:27.509',
      '2022-02-18 11:17:34.665',
      '2022-02-18 11:17:41.911',
      '2022-02-18 11:17:47.994',
      '2022-02-18 11:17:54.054',
      '2022-02-18 11:18:02.483',
      '2022-02-18 11:18:08.540',
      '2022-02-18 11:18:15.799',
      '2022-02-18 11:18:21.816',
      '2022-02-18 11:18:29.009',
      '2022-02-18 11:18:36.251',
      '2022-02-18 11:18:42.266',
      '2022-02-18 11:18:49.456',
      '2022-02-18 11:18:56.648',
      '2022-02-18 11:19:03.905',
      '2022-02-18 11:19:11.117',
      '2022-02-18 11:19:19.597',
      '2022-02-18 11:19:25.657',
      '2022-02-18 11:19:32.935',
      '2022-02-18 11:19:41.336',
      '2022-02-18 11:19:47.357',
      '2022-02-18 11:19:54.634',
      '2022-02-18 11:20:00.593',
      '2022-02-18 11:20:07.851',
      '2022-02-18 11:20:13.911',
      '2022-02-18 11:20:22.352',
      '2022-02-18 11:20:28.421',
      '2022-02-18 11:20:35.635',
      '2022-02-18 11:20:41.643',
      '2022-02-18 11:20:48.850',
      '2022-02-18 11:20:54.909',
      '2022-02-18 11:21:00.907',
      '2022-02-18 11:21:08.147',
      '2022-02-18 11:21:14.195',
      '2022-02-18 11:21:20.172',
      '2022-02-18 11:21:27.416',
      '2022-02-18 11:21:33.430',
      '2022-02-18 11:37:14.038',
      '2022-02-18 12:57:14.391',
      '2022-02-18 14:17:17.428',
      '2022-02-18 15:37:15.181',
      '2022-02-18 16:57:13.688',
      '2022-02-18 18:17:13.078',
      '2022-02-18 19:37:14.792',
      '2022-02-18 20:57:15.217',
      '2022-02-18 22:17:17.509',
      '2022-02-18 23:37:20.327',
      '2022-02-19 00:57:22.220',
      '2022-02-19 02:17:31.623',
      '2022-02-19 03:37:29.640',
      '2022-02-19 04:57:28.546',
      '2022-02-19 06:17:24.500',
      '2022-02-19 07:37:30.162',
      '2022-02-19 08:57:34.778',
      '2022-02-19 10:17:35.780',
      '2022-02-19 11:37:32.829',
      '2022-02-19 12:57:30.646',
      '2022-02-19 14:17:29.830',
      '2022-02-19 15:37:30.051',
      '2022-02-19 16:57:29.378',
      '2022-02-19 18:17:32.823',
      '2022-02-19 19:37:29.750',
      '2022-02-19 20:57:26.703',
      '2022-02-19 22:17:24.936',
      '2022-02-19 23:37:27.962',
      '2022-02-20 00:57:26.498',
      '2022-02-20 02:17:29.653',
      '2022-02-20 03:37:33.839',
      '2022-02-20 04:57:35.666',
      '2022-02-20 06:17:33.768',
      '2022-02-20 07:37:33.857',
      '2022-02-20 08:57:40.109',
      '2022-02-20 10:17:36.997',
      '2022-02-20 11:37:33.331',
      '2022-02-20 12:57:30.728',
      '2022-02-20 14:17:32.304',
      '2022-02-20 15:37:30.466',
      '2022-02-20 16:57:27.635',
      '2022-02-20 18:17:25.640',
      '2022-02-20 19:37:21.598',
      '2022-02-20 20:57:21.437',
      '2022-02-20 22:17:23.527',
      '2022-02-20 23:37:24.288',
      '2022-02-21 00:57:24.969',
      '2022-02-21 02:17:25.688',
      '2022-02-21 03:37:25.314',
      '2022-02-21 04:57:28.193',
      '2022-02-21 06:17:29.655',
      '2022-02-21 07:37:25.927',
      '2022-02-21 08:57:21.508',
      '2022-02-21 10:17:25.244',
      '2022-02-21 11:37:26.984',
      '2022-02-21 12:57:29.311',
      '2022-02-21 14:17:26.829',
      '2022-02-21 15:37:24.124',
      '2022-02-21 16:57:22.839',
      '2022-02-21 18:17:21.187',
      '2022-02-21 19:37:24.734',
      '2022-02-21 20:57:22.298',
      '2022-02-21 22:17:20.875',
      '2022-02-21 23:37:20.902',
      '2022-02-22 00:57:17.742',
      '2022-02-22 02:17:17.867',
      '2022-02-22 03:37:16.794',
      '2022-02-22 04:57:15.012',
      '2022-02-22 06:17:15.198',
      '2022-02-22 07:37:11.151',
      '2022-02-22 08:57:14.277',
      '2022-02-22 10:17:13.516',
      '2022-02-22 11:37:15.381',
      '2022-02-22 12:57:18.687',
      '2022-02-22 14:17:21.967',
      '2022-02-22 15:37:19.717',
      '2022-02-22 16:57:20.500',
      '2022-02-22 18:17:20.922',
      '2022-02-22 19:37:18.897',
      '2022-02-22 20:57:17.148',
      '2022-02-22 22:17:17.310',
      '2022-02-22 23:37:19.812',
      '2022-02-23 00:57:22.148',
      '2022-02-23 02:17:22.892',
      '2022-02-23 03:37:22.125',
      '2022-02-23 04:57:19.683',
      '2022-02-23 06:17:19.142',
      '2022-02-23 07:37:16.972',
      '2022-02-23 08:57:12.787',
      '2022-02-23 10:17:10.768',
      '2022-02-23 11:37:14.405',
      '2022-02-23 12:57:14.219',
      '2022-02-23 14:17:09.522',
      '2022-02-23 15:37:14.703',
      '2022-02-23 16:57:15.552',
      '2022-02-23 18:17:13.734',
      '2022-02-23 19:37:10.203',
      '2022-02-23 20:57:11.312',
      '2022-02-23 22:17:13.038',
      '2022-02-23 23:37:14.715',
      '2022-02-24 00:57:09.032',
      '2022-02-24 02:17:06.491',
      '2022-02-24 03:37:00.647',
      '2022-02-24 04:56:55.667',
      '2022-02-24 06:17:01.061',
      '2022-02-24 07:37:02.469',
      '2022-02-24 08:57:00.516',
      '2022-02-24 10:17:03.186',
      '2022-02-24 11:37:06.417',
      '2022-02-24 12:57:09.981',
      '2022-02-24 14:17:02.967',
      '2022-02-24 15:37:01.391',
      '2022-02-24 16:57:01.936',
      '2022-02-24 18:17:02.867',
      '2022-02-24 19:36:57.858',
      '2022-02-24 20:56:53.978',
      '2022-02-24 22:16:50.921',
      '2022-02-24 23:36:50.777',
      '2022-02-25 00:56:52.424',
      '2022-02-25 02:16:57.419',
      '2022-02-25 03:36:52.015',
      '2022-02-25 04:56:52.793',
      '2022-02-25 06:16:47.827',
      '2022-02-25 07:36:52.741',
      '2022-02-25 08:56:50.435',
      '2022-02-25 10:16:42.509',
      '2022-02-25 11:36:41.729',
      '2022-02-25 12:56:39.447',
      '2022-02-25 14:16:37.540',
      '2022-02-25 15:36:33.347',
      '2022-02-25 16:56:36.101',
      '2022-02-25 18:16:35.654',
      '2022-02-25 19:36:38.307',
      '2022-02-25 20:56:40.828',
      '2022-02-25 22:16:43.527',
      '2022-02-25 23:36:41.920',
      '2022-02-26 00:56:41.355',
      '2022-02-26 02:16:41.459',
      '2022-02-26 03:36:40.973',
      '2022-02-26 04:56:40.756',
      '2022-02-26 06:16:45.179',
      '2022-02-26 07:36:40.706',
      '2022-02-26 08:56:35.445',
      '2022-02-26 10:16:30.815',
      '2022-02-26 11:36:32.058',
      '2022-02-26 12:56:30.996',
      '2022-02-26 14:16:31.387',
      '2022-02-26 15:36:31.277',
      '2022-02-26 16:56:31.576',
      '2022-02-26 18:16:29.045',
      '2022-02-26 19:36:26.030',
      '2022-02-26 20:56:24.856',
      '2022-02-26 22:16:26.815',
      '2022-02-26 23:36:27.734',
      '2022-02-27 00:56:24.574',
      '2022-02-27 02:16:22.551',
      '2022-02-27 03:36:27.061',
      '2022-02-27 04:56:28.564',
      '2022-02-27 06:16:23.248',
      '2022-02-27 07:36:24.841',
      '2022-02-27 08:56:23.846',
      '2022-02-27 10:16:20.605',
      '2022-02-27 11:36:27.218',
      '2022-02-27 12:56:24.735',
      '2022-02-27 14:16:25.640',
      '2022-02-27 15:36:20.312',
      '2022-02-27 16:56:17.379',
      '2022-02-27 18:16:15.627',
      '2022-02-27 19:36:17.416',
      '2022-02-27 20:56:18.695',
      '2022-02-27 22:16:23.420',
      '2022-02-27 23:36:25.082',
      '2022-02-28 00:56:24.043',
      '2022-02-28 02:16:23.703',
      '2022-02-28 03:36:23.271',
      '2022-02-28 04:56:20.199',
      '2022-02-28 06:16:25.011',
      '2022-02-28 07:36:27.866',
      '2022-02-28 08:56:30.968',
      '2022-02-28 10:16:27.708',
      '2022-02-28 11:36:27.997',
      '2022-02-28 12:56:26.139',
      '2022-02-28 14:16:26.650',
      '2022-02-28 15:36:26.519',
      '2022-02-28 16:56:32.671',
      '2022-02-28 18:16:33.382',
      '2022-02-28 19:36:34.232',
      '2022-02-28 20:56:37.815',
      '2022-02-28 22:16:34.858',
      '2022-02-28 23:36:32.792',
      '2022-03-01 00:56:32.085',
      '2022-03-01 02:16:34.114',
      '2022-03-01 03:36:39.038',
      '2022-03-01 04:56:35.521',
      '2022-03-01 06:16:35.914',
      '2022-03-01 07:36:35.672',
      '2022-03-01 08:56:33.850',
      '2022-03-01 10:16:31.421',
      '2022-03-01 11:36:33.723',
      '2022-03-01 12:56:33.229',
      '2022-03-01 14:16:35.076',
      '2022-03-01 15:36:32.031',
      '2022-03-01 16:56:32.719',
      '2022-03-01 18:16:32.188',
      '2022-03-01 19:36:34.137',
      '2022-03-01 20:56:34.127',
      '2022-03-01 22:16:32.599',
      '2022-03-01 23:36:33.473',
      '2022-03-02 00:56:34.517',
      '2022-03-02 02:16:35.463',
      '2022-03-02 03:36:38.297',
      '2022-03-02 04:56:40.839',
      '2022-03-02 06:16:41.398',
      '2022-03-02 07:36:44.048',
      '2022-03-02 08:56:45.829',
      '2022-03-02 10:16:46.988',
      '2022-03-02 11:36:45.557',
      '2022-03-02 12:56:44.718',
      '2022-03-02 14:16:44.707',
      '2022-03-02 15:36:42.284',
      '2022-03-02 16:56:45.704',
      '2022-03-02 18:16:45.996',
      '2022-03-02 19:36:43.573',
      '2022-03-02 20:56:43.782',
      '2022-03-02 22:16:41.251',
      '2022-03-02 23:36:41.768',
      '2022-03-03 00:56:44.498',
      '2022-03-03 02:16:40.335',
      '2022-03-03 03:36:37.922',
      '2022-03-03 04:56:40.848',
      '2022-03-03 06:16:43.576',
      '2022-03-03 07:36:44.503',
      '2022-03-03 08:56:42.764',
      '2022-03-03 10:16:45.254',
      '2022-03-03 11:36:49.677',
      '2022-03-03 12:56:49.153',
      '2022-03-03 14:16:47.610',
      '2022-03-03 15:36:42.499',
      '2022-03-03 16:56:45.082',
      '2022-03-03 18:16:45.118',
      '2022-03-03 19:36:41.011',
      '2022-03-03 20:56:42.731',
      '2022-03-03 22:16:44.865',
      '2022-03-03 23:36:45.260',
      '2022-03-04 00:56:46.817',
      '2022-03-04 02:16:48.873',
      '2022-03-04 03:36:49.341',
      '2022-03-04 04:56:50.328',
      '2022-03-04 06:16:55.704',
      '2022-03-04 07:36:52.705',
      '2022-03-04 08:56:53.641',
      '2022-03-04 10:16:58.994',
      '2022-03-04 11:36:58.297',
      '2022-03-04 12:56:57.511',
      '2022-03-04 14:16:57.904',
      '2022-03-04 15:36:53.692',
      '2022-03-04 16:56:51.517',
      '2022-03-04 18:16:54.584',
      '2022-03-04 19:36:53.186',
      '2022-03-04 20:56:51.752',
      '2022-03-04 22:16:55.938',
      '2022-03-04 23:36:51.544',
      '2022-03-05 00:56:53.743',
      '2022-03-05 02:16:48.361',
      '2022-03-05 03:36:47.423',
      '2022-03-05 04:56:44.540',
      '2022-03-05 06:16:44.784',
      '2022-03-05 07:36:41.923',
      '2022-03-05 08:56:41.220',
      '2022-03-05 10:16:42.375',
      '2022-03-05 11:36:47.481',
      '2022-03-05 12:56:49.056',
      '2022-03-05 14:16:49.203',
      '2022-03-05 15:36:45.546',
      '2022-03-05 16:56:45.249',
      '2022-03-05 18:16:43.839',
      '2022-03-05 19:36:41.187',
      '2022-03-05 20:56:42.926',
      '2022-03-05 22:16:38.104',
      '2022-03-05 23:36:40.956',
      '2022-03-06 00:56:36.567',
      '2022-03-06 02:16:37.145',
      '2022-03-06 03:36:33.891',
      '2022-03-06 04:56:34.921',
      '2022-03-06 06:16:34.792',
      '2022-03-06 07:36:34.395',
      '2022-03-06 08:56:34.046',
      '2022-03-06 10:16:35.010',
      '2022-03-06 11:36:36.596',
      '2022-03-06 12:56:34.419',
      '2022-03-06 14:16:36.110',
      '2022-03-06 15:36:37.688',
      '2022-03-06 16:56:37.952',
      '2022-03-06 18:16:35.550',
      '2022-03-06 19:36:28.729',
      '2022-03-06 20:56:26.390',
      '2022-03-06 22:16:26.472',
      '2022-03-06 23:36:25.781',
      '2022-03-07 00:56:30.256',
      '2022-03-07 02:16:27.610',
      '2022-03-07 03:36:28.288',
      '2022-03-07 04:56:30.028',
      '2022-03-07 06:16:30.518',
      '2022-03-07 07:36:29.552',
      '2022-03-07 08:56:29.315',
      '2022-03-07 10:16:27.735',
      '2022-03-07 11:36:25.766',
      '2022-03-07 12:56:25.702',
      '2022-03-07 14:16:22.690',
      '2022-03-07 15:36:20.640',
      '2022-03-07 16:56:48.671',
      '2022-03-07 18:16:47.110',
      '2022-03-07 19:36:44.569',
      '2022-03-07 20:56:44.085',
      '2022-03-07 22:16:45.512',
      '2022-03-07 23:36:46.596',
      '2022-03-08 00:56:44.866',
      '2022-03-08 02:16:43.671',
      '2022-03-08 03:36:41.453',
      '2022-03-08 04:56:42.005',
      '2022-03-08 06:16:42.424',
      '2022-03-08 07:36:44.673',
      '2022-03-08 08:56:44.434',
      '2022-03-08 10:16:42.156',
      '2022-03-08 11:36:50.713',
      '2022-03-08 12:56:45.675',
      '2022-03-08 14:16:47.820',
      '2022-03-08 15:36:46.244',
      '2022-03-08 16:56:48.834',
      '2022-03-08 18:16:45.716',
      '2022-03-08 19:36:43.204',
      '2022-03-08 20:56:43.065',
      '2022-03-08 22:16:41.911',
      '2022-03-08 23:36:42.439',
      '2022-03-09 00:56:43.328',
      '2022-03-09 02:16:40.791',
      '2022-03-09 03:36:41.448',
      '2022-03-09 04:56:40.747',
      '2022-03-09 06:16:35.675',
      '2022-03-09 07:36:35.872',
      '2022-03-09 08:56:37.156',
      '2022-03-09 10:16:34.926',
      '2022-03-09 11:36:37.047',
      '2022-03-09 12:56:37.546',
      '2022-03-09 14:16:36.564',
      '2022-03-09 15:36:36.581',
      '2022-03-09 16:56:37.343',
      '2022-03-09 18:16:32.652',
      '2022-03-09 19:36:34.083',
      '2022-03-09 20:56:33.229'
    ]
    const yDataArr = []
    // 模拟数据
    for(let i = 0; i <= xDataArr.length; i++) {
      if(i > 100) {
        yDataArr.push(Math.floor(Math.random() * 20))
      } else {
        yDataArr.push(Math.floor(Math.random() * 50))
      }
    }
    const option = {
      title: [{
        top: '5%',
        left: 'center',
        text: '趋势图',
        textStyle: {
          fontSize: 15, // 大小
        },
      }, {
        top: '5%',
        left: '13%',
        textStyle: {
          fontSize: 10, // 大小
        }
      }],
      grid: {
        left: '7%',
        right: '7%',
        top: '21%',
        bottom: '15%'
      },
      // legend: {}, // 在头部显示每个折线的名称和颜色
      toolbox: { // 工具箱
        feature: {
          saveAsImage: {} // 保存图片
        }
      },
      dataZoom: [{
        type: 'inside',
      }], // 开启缩放，滚滑轮缩放x轴
      tooltip: {
        trigger: 'axis'
      }, // 鼠标移动上去内容提示框
      xAxis: { // x轴数据类型
        type: 'category', // 类目轴category是需要data的
        // boundaryGap: false, // x轴的点和数据对齐 建议折线图这样设置，更好看
        data: xDataArr,
        name: '[Hz]'
      },
      yAxis: { // y轴数据类型
        type: 'value' // value不需要data数据
      },
      series: [{ // 具体的数据
        name: '数据',
        data: yDataArr,
        type: 'line',
      }]
    }
    myCharts.setOption(option)
    this.interval = setInterval(() => {
      for(let i = 0; i < yDataArr.length; i++) {
        if(i > 20) {
          yDataArr[i] = Math.floor(Math.random() * 5)
        } else {
          yDataArr[i] = Math.floor(Math.random() * 50)
        }
      }
      myCharts.setOption(option)
    }, 2000)
    this.mychart = myCharts

    // 监听窗口大小变化
    window.onresize = () => {
      console.log('窗口大小改变')
      this.mychart.resize() // 刷新echarts的大小
    }
    // 页面加载完成
    // window.onload = function() {
    //   bindMaxInput()
    // }
    this.mychart.getZr().off('click')
    this.mychart.getZr().on('click', this.chartClick)
  },
  methods: {
    stopInterval() {
      console.log(this.interval)
      clearInterval(this.interval) // 停止interval https://www.cnblogs.com/fengxm/p/6150537.html
    },
    /**
     * 在图上画条线，lines是位置坐标
     * @param lines 格式 [2022-01-25 10:26:14.069, 2022-01-25 10:26:14.069]
     */
    drawLine(lines) {
      const option = {
        series: []
      }
      const op = this.mychart.getOption()
      const data = []
      // 处理当前要添加的线条
      for(const line of lines) {
        data.push({
          xAxis: line,
        })
      }
      // 获取图标上之前的markLine标记，并处理其他标记线条，防止删除之前的标记
      // eslint-disable-next-line no-unused-vars
      const allMarkLine = op.series[0].markLine

      // 处理报警线的数据 如果图标中没有报警线，删除即可
      if(allMarkLine) {
        for(const d of allMarkLine.data) {
          // d的样例 = { "name": "高报", "yAxis": 120 }
          if(d.name && d.name.indexOf('高报') !== -1) {
            console.log('高报', d, allMarkLine)
            data.push({
              ...d, // 展开数据
              lineStyle: { // 高报对应的样式
                color: 'red'
              }
            })
          }
        }
      }

      option.series[0] = {
        type: 'line',
        markLine: {
          lineStyle: {
            color: this.$store.state.textcolor,
            type: 'solid',
          },
          animation: false, // 关闭动画
          symbol: ['none', 'none'],
          data
        }
      }

      this.mychart.setOption(option)
    },

    /**
     * 在图上画条线，保留上一条线
     * @param lines 2022-01-25 10:26:14.069
     */
    drawLineAndProLine(line) {
      if(line === this.proLine) return
      console.log('happen->趋势drawLineAndPro', line, this.proLine)
      if(this.proLine) {
        this.drawLine([line, this.proLine])
        this.timeSub(line, this.proLine)
      } else {
        this.drawLine([line])
      }
      this.proLine = line // 上一条线的位置
    },
    /**
     * 显示两个时间的差
     * 需要修改optin的title，添加第二个标题，通过修改第二个标题实现显示功能
     * @param time1
     * @param time2
     */
    timeSub(time1, time2) {
      console.log(this.mychart.getOption())
      // 计算时间差
      if(new Date(time1).getTime() < new Date(time2).getTime()) {
        // 交换
        const t = time1
        time1 = time2
        time2 = t
      }

      // 计算y轴的差值
      const op = this.mychart.getOption()
      const y1 = op.xAxis[0].data.indexOf(time1)
      const y2 = op.xAxis[0].data.indexOf(time2)
      // 幅值差量
      const subFuzhi = op.series[0].data[y2] - op.series[0].data[y1]

      console.log('happen-> time1 time2', time1, time2, subFuzhi)
      const dateEnd = new Date(time1)
      const dateBegin = new Date(time2)

      const dateDiff = dateEnd.getTime() - dateBegin.getTime()// 时间差的毫秒数
      const dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000))// 计算出相差天数
      const leave1 = dateDiff % (24 * 3600 * 1000) // 计算天数后剩余的毫秒数
      const hours = Math.floor(leave1 / (3600 * 1000))// 计算出小时数
      // 计算相差分钟数
      const leave2 = leave1 % (3600 * 1000) // 计算小时数后剩余的毫秒数
      const minutes = Math.floor(leave2 / (60 * 1000))// 计算相差分钟数
      // 计算相差秒数
      const leave3 = leave2 % (60 * 1000) // 计算分钟数后剩余的毫秒数
      const seconds = Math.round(leave3 / 1000)

      const title = '差量 ' + dayDiff + '天 ' + hours + '小时 ' + minutes + ' 分钟' + seconds + ' 秒'

      const titles = op.title
      titles[1].text = `${title},${subFuzhi}um`
      const option = {
        title: titles
      }

      this.mychart.setOption(option)
    },
    /**
     * 图表鼠标单击事件处理
     * 使用方法，任意位置注册即可
     * this.mychart.getZr().off("click");
     * this.mychart.getZr().on("click", this.chartClick);
     * @param params
     */
    chartClick(params) {
      const pointInPixel = [params.offsetX, params.offsetY]
      if (this.mychart.containPixel('grid', pointInPixel)) {
        const pointInGrid = this.mychart.convertFromPixel(
          { seriesIndex: 0 },
          pointInPixel
        )
        // X轴序号
        var xIndex = pointInGrid[0]
        // Y轴序号
        var yIndex = pointInGrid[1]
        // 获取当前图表的option
        var op = this.mychart.getOption()
        // 获得图表中我们想要的数据封装为param {name: '2022-03-05 07:51:38.785', seriesName: '2级A壳体振动V'}
        var param = {}
        param.name = op.xAxis[0].data[xIndex]

        // 获取离鼠标最近的 series 的线的名字，以便提供给其他组件
        var min = Number.MAX_VALUE
        var seriesNameIndex = 0
        for (var i = 0; i < op.series.length; i++) {
          if (Math.abs(op.series[i].data[xIndex] - yIndex) < min) {
            min = Math.abs(op.series[i].data[xIndex] - yIndex)
            seriesNameIndex = i
          }
        }
        param.seriesName = op.series[seriesNameIndex].name
        // console.log("happen-> param", seriesNameIndex, param)

        // 画两条线
        this.drawLineAndProLine(param.name)
        // 告诉父组件刷新其他页面
        this.$emit('chartinfo', param)
      }
    },

  }

}
</script>

<style scoped lang="less">
.home {
  margin: 20px;
  .message {
    padding: 10px;
    margin-bottom: 10px;
    background: white;
    color: #333;
  }
  .buttons {
    padding: 10px;
    margin-bottom: 10px;
    background: white;
  }
  #chart1 {
    padding: 20px;
    background: white;
  }
}
</style>
